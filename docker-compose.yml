version: '3.8'

services:
  jupyter:
    image: tensorflow/tensorflow:2.17.0-gpu-jupyter
    container_name: homl_tf_gpu
    ports:
      - "8888:8888"
    volumes:
      - ./:/tf/work
    working_dir: /tf/work
    # Use the NVIDIA runtime. Newer Docker (>=19.03) can use --gpus; some installations require nvidia runtime.
    runtime: nvidia
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
    shm_size: '1gb'
    restart: unless-stopped
    command: bash -lc "jupyter lab --ip=0.0.0.0 --port=8888 --no-browser --allow-root"
